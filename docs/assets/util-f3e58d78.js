import{a as c,Q as d,c as l,P as g,v as m,T as x,a6 as p,n as u}from"./three.module-31477d3d.js";import{V as L,a as f,N as i}from"./mapSource-de628f72.js";const k=(e=f,o)=>L.create({imgSource:e,demSource:o,centralMeridian:90,minLevel:2,maxLevel:18}),b=(e,o,t)=>{const n=document.querySelector(e);if(!n)throw new Error(`Element ${e} is not found!`);return new i.GLViewer(n,o,o.clone().add(t))},F=(e,o="#load-state")=>{const t=document.querySelector(o);t&&(e.addEventListener("loading-start",n=>{t.innerHTML="Started: "+n.itemsLoaded+" of "+n.itemsTotal+" files."}),e.addEventListener("loading-progress",n=>{t.innerHTML="Loading: "+n.itemsLoaded+" of "+n.itemsTotal+" files."}),e.addEventListener("loading-complete",()=>{t.innerHTML="Loading complete!"}),e.addEventListener("loading-error",n=>{t.innerHTML="There was an error loading "+n}))},M=(e,o="#camera")=>{const t=document.querySelector(o);t&&e.controls.addEventListener("change",()=>{t.innerHTML=`摄像机:(${e.camera.position.x.toFixed(2)},
                               ${e.camera.position.y.toFixed(2)},
                               ${e.camera.position.z.toFixed(2)}) 
                           焦点:(${e.controls.target.x.toFixed(2)},
                                ${e.controls.target.y.toFixed(2)},
                                ${e.controls.target.z.toFixed(2)}) 
                          方位角:${e.controls.getAzimuthalAngle().toFixed(2)}° 
                          俯仰角:${e.controls.getPolarAngle().toFixed(2)}°`})},T=(e,o,t="#location")=>{const n=document.querySelector(t);if(n){const r=new c;e.container.addEventListener("pointermove",s=>{r.x=s.clientX/e.container.clientWidth*2-1,r.y=-(s.clientY/e.container.clientHeight)*2+1;const a=o.getLocalInfoFromScreen(e.camera,r);a?n.innerHTML=`经度:${a.location.x.toFixed(3)}°  
                            纬度:${a.location.y.toFixed(3)}°  
                            海拔:${(a.location.z*1e3).toFixed(1)}m
                            离摄像机距离:${a.distance.toFixed(3)}km `:n.innerHTML=""})}},E=(e,o="#attribution")=>{const t=document.querySelector(o);if(t){const n=()=>t.innerHTML="© "+e.attributions.join(" | © ");e.addEventListener("source-changed",n),n()}},$=e=>{const o=new d().setPath("../image/skybox/").load(["skybox_nx.png","skybox_px.png","skybox_ny.png","skybox_py.png","skybox_nz.png","skybox_pz.png"]);e.scene.background=o},S=e=>{const o=new l(new g,new m({map:new x().load("../image/tile0.png",t=>t.colorSpace=p)}));o.name="background",o.material.polygonOffsetFactor=10,o.material.polygonOffsetUnits=1,o.material.polygonOffset=!0,o.renderOrder=-1,o.translateZ(-.1),o.applyMatrix4(e.rootTile.matrix),e.add(o)};function H(e,o){var n;const t=new i.FakeEarth(((n=e.scene.fog)==null?void 0:n.color)||new u(0));t.name="fakeearth",t.applyMatrix4(o.rootTile.matrix),e.controls.addEventListener("change",()=>{t.visible=e.controls.getDistance()>3e3}),o.add(t)}export{b as a,F as b,k as c,S as d,H as e,$ as f,E as g,M as h,T as s};
