import"./modulepreload-polyfill-3cfb730f.js";import{V as s,n as m}from"./three.module-31477d3d.js";import{a as l,N as i}from"./mapSource-de628f72.js";import{c as p,a as d,s as f,b as u}from"./util-f3e58d78.js";const o=p([l]),c=o.geo2pos(new s(105,34)),g=new s(c.x,c.y,0),h=new s(0,-5e3,1e4),n=d("#map",g,h);n.scene.add(o);function y(t){t.addEventListener("update",()=>{const a=document.querySelector("#compass-plane");a&&(a.style.transform=`rotateX(${t.controls.getPolarAngle()}rad)`);const e=document.querySelector("#compass-text");e&&(e.style.transform=`rotate(${t.controls.getAzimuthalAngle()}rad)`)})}y(n);function x(t,a){var r;const e=new i.FakeEarth(((r=t.scene.fog)==null?void 0:r.color)||new m(0));return e.name="fakeearth",e.applyMatrix4(a.rootTile.matrix),t.controls.addEventListener("change",()=>{e.visible=t.controls.getDistance()>3e3}),e}o.add(x(n,o));f(n,o);u(o);
