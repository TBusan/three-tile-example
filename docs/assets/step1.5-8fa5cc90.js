import"./modulepreload-polyfill-3cfb730f.js";import{V as a,A as m,G as x,e as p,m as y,a as f}from"./mapSource-e82aaabe.js";import{C as g,a as u}from"./CSS2DRenderer-6962ade6.js";import{c as h,a as E,s as L,b as S}from"./util-a27d2d6b.js";const o=h(f,y),w=new a(108,34,0),v=new a(108,0,1e4),e=E("#map",o,w,v);e.scene.add(o);const c=new g;c.setSize(e.container.clientWidth,e.container.clientHeight);c.domElement.style.position="absolute";e.container.appendChild(c.domElement);e.addEventListener("update",()=>{c.render(e.scene,e.camera)});window.addEventListener("resize",()=>c.setSize(e.container.clientWidth,e.container.clientHeight));e.controls.addEventListener("change",()=>{c.domElement.style.display=e.controls.getDistance()<1e4?"inline":"none"});(()=>{const t=new m(3e3),n=o.localToWorld(o.geo2pos(w));t.position.set(n.x,n.y,10),e.scene.add(t)})();const l=new x;o.add(l);(()=>{const t=new a(0,0,1);for(let n=60;n<140;n+=10)for(let s=0;s<70;s+=10){const i=o.geo2pos(new a(n,s)),r=new p(t,new a(i.x,i.y,-1),50);l.add(r)}l.traverse(n=>{if(n instanceof p){const s=document.createElement("span");s.className="label";const i=o.pos2geo(new a(n.position.x,n.position.y));s.innerHTML=`${i.x.toFixed(0)},${i.y.toFixed(0)}`,s.addEventListener("mouseenter",()=>{const d=o.getLocalInfoFromGeo(new a(i.x,i.y));d&&(s.title=`世界坐标：
x: ${d.point.x.toFixed(3)}
y: ${d.point.y.toFixed(3)}
z: ${d.point.z.toFixed(3)}`)});const r=new u(s);r.position.copy(n.position.clone().add(new a(0,0,10))),l.add(r)}})})();(()=>{const t=new m;e.scene.add(t),e.controls.addEventListener("change",()=>{e.camera.updateMatrixWorld();const n=new a(-.9,-.85,0).unproject(e.camera);t.position.copy(n),t.scale.setScalar(t.position.distanceTo(e.camera.position)/50)})})();L(e,o);S(o);
