import{Y as g,a as x,q as d,b as m,a2 as u,e as p,P as y,J as f,T as L,ag as h,r as b,V as c,d as k}from"./mapSource-2c762b60.js";const M=(e=x,o)=>g.create({imgSource:e,demSource:o,lon0:90,minLevel:2,maxLevel:18}),T=(e,o,t)=>{const n=document.querySelector(e);if(!n)throw new Error(`Element ${e} is not found!`);return new d.GLViewer(n,o,o.clone().add(t))},$=(e,o="#load-state")=>{const t=document.querySelector(o);t&&(e.addEventListener("loading-start",n=>{t.innerHTML="Started: "+n.itemsLoaded+" of "+n.itemsTotal+" files."}),e.addEventListener("loading-progress",n=>{t.innerHTML="Loading: "+n.itemsLoaded+" of "+n.itemsTotal+" files."}),e.addEventListener("loading-complete",()=>{t.innerHTML="Loading complete!"}),e.addEventListener("loading-error",n=>{t.innerHTML="There was an error loading "+n}))},E=(e,o="#camera")=>{const t=document.querySelector(o);t&&e.controls.addEventListener("change",()=>{t.innerHTML=`摄像机:(${e.camera.position.x.toFixed(2)},
                               ${e.camera.position.y.toFixed(2)},
                               ${e.camera.position.z.toFixed(2)}) 
                           焦点:(${e.controls.target.x.toFixed(2)},
                                ${e.controls.target.y.toFixed(2)},
                                ${e.controls.target.z.toFixed(2)}) 
                          方位角:${e.controls.getAzimuthalAngle().toFixed(2)}° 
                          俯仰角:${e.controls.getPolarAngle().toFixed(2)}°`})},S=(e,o,t="#location")=>{const n=document.querySelector(t);if(n){const s=new m;e.container.addEventListener("pointermove",r=>{s.x=r.clientX/e.container.clientWidth*2-1,s.y=-(r.clientY/e.container.clientHeight)*2+1;const a=o.getLocalInfoFromScreen(e.camera,s);a?n.innerHTML=`经度:${a.location.x.toFixed(3)}°  
                            纬度:${a.location.y.toFixed(3)}°  
                            海拔:${(a.location.z*1e3).toFixed(1)}m
                            离摄像机距离:${a.distance.toFixed(3)}km `:n.innerHTML=""})}},q=(e,o="#attribution")=>{const t=document.querySelector(o);if(t){const n=()=>t.innerHTML="© "+e.attributions.join(" | © ");e.addEventListener("source-changed",n),n()}},H=e=>{const o=new u().setPath("../image/skybox/").load(["skybox_nx.png","skybox_px.png","skybox_ny.png","skybox_py.png","skybox_nz.png","skybox_pz.png"]);e.scene.background=o},w=e=>{const o=new p(new y,new f({map:new L().load("../image/tile0.png",t=>t.colorSpace=h)}));o.name="background",o.material.polygonOffsetFactor=10,o.material.polygonOffsetUnits=1,o.material.polygonOffset=!0,o.renderOrder=-1,o.translateZ(-.1),o.applyMatrix4(e.rootTile.matrix),e.add(o)};function z(e,o){var n;const t=new d.FakeEarth(((n=e.scene.fog)==null?void 0:n.color)||new b(0));t.name="fakeearth",t.applyMatrix4(o.rootTile.matrix),e.controls.addEventListener("change",()=>{t.visible=e.controls.getDistance()>3e3}),o.add(t)}function A(e){e.addEventListener("update",()=>{const o=document.querySelector("#compass-plane");o&&(o.style.transform=`rotateX(${e.controls.getPolarAngle()}rad)`);const t=document.querySelector("#compass-text");t&&(t.style.transform=`rotate(${e.controls.getAzimuthalAngle()}rad)`)})}const C=(e,o,t,n)=>{const s=e.geo2pos(new c(o.x,o.y)),r=e.geo2pos(new c(t.x,t.y)),a=new c(r.x-s.x,r.y-s.y,1),l=new c(s.x+a.x/2,r.y-a.y/2,n),i=new k;return i.setPosition(l),i.scale(a),i};export{T as a,$ as b,M as c,z as d,w as e,H as f,q as g,E as h,C as i,S as s,A as u};
