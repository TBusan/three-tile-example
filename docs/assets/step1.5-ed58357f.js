import"./modulepreload-polyfill-3cfb730f.js";import{V as s,A as m,G as x,e as p,m as y,a as f}from"./mapSource-bbe48df7.js";import{C as g,a as u}from"./CSS2DRenderer-2507dd91.js";import{c as h,a as E,s as L,b as S}from"./util-5a34c843.js";const a=h(f,y),w=new s(108,34,0),v=new s(108,0,1e4),e=E("#map",a,w,v),c=new g;c.setSize(e.container.clientWidth,e.container.clientHeight);c.domElement.style.position="absolute";e.container.appendChild(c.domElement);e.addEventListener("update",()=>{c.render(e.scene,e.camera)});window.addEventListener("resize",()=>c.setSize(e.container.clientWidth,e.container.clientHeight));e.controls.addEventListener("change",()=>{c.domElement.style.display=e.controls.getDistance()<1e4?"inline":"none"});(()=>{const n=new m(3e3),o=a.localToWorld(a.geo2pos(w));n.position.set(o.x,o.y,10),e.scene.add(n)})();const l=new x;a.add(l);(()=>{const n=new s(0,0,1);for(let o=60;o<140;o+=10)for(let t=0;t<70;t+=10){const i=a.geo2pos(new s(o,t)),r=new p(n,new s(i.x,i.y,-1),50);l.add(r)}l.traverse(o=>{if(o instanceof p){const t=document.createElement("span");t.className="label";const i=a.pos2geo(new s(o.position.x,o.position.y));t.innerHTML=`${i.x.toFixed(0)},${i.y.toFixed(0)}`,t.addEventListener("mouseenter",()=>{const d=a.getLocalInfoFromGeo(new s(i.x,i.y));d&&(t.title=`世界坐标：
x: ${d.point.x.toFixed(3)}
y: ${d.point.y.toFixed(3)}
z: ${d.point.z.toFixed(3)}`)});const r=new u(t);r.position.copy(o.position.clone().add(new s(0,0,10))),l.add(r)}})})();(()=>{const n=new m;e.scene.add(n),e.controls.addEventListener("change",()=>{e.camera.updateMatrixWorld();const o=new s(-.9,-.85,0).unproject(e.camera);n.position.copy(o),n.scale.setScalar(n.position.distanceTo(e.camera.position)/50)})})();L(e,a);S(a);
