import{Y as i,a as d,q as c,b as l,a2 as g,e as m,P as u,J as x,T as p,ag as f,r as y}from"./mapSource-6ce90261.js";const h=(e=d,t)=>i.create({imgSource:e,demSource:t,lon0:90,minLevel:2,maxLevel:18}),b=(e,t,o)=>{const n=document.querySelector(e);if(!n)throw new Error(`Element ${e} is not found!`);return new c.GLViewer(n,t,t.clone().add(o))},k=(e,t="#load-state")=>{const o=document.querySelector(t);o&&(e.addEventListener("loading-start",n=>{o.innerHTML="Started: "+n.itemsLoaded+" of "+n.itemsTotal+" files."}),e.addEventListener("loading-progress",n=>{o.innerHTML="Loading: "+n.itemsLoaded+" of "+n.itemsTotal+" files."}),e.addEventListener("loading-complete",()=>{o.innerHTML="Loading complete!"}),e.addEventListener("loading-error",n=>{o.innerHTML="There was an error loading "+n}))},F=(e,t="#camera")=>{const o=document.querySelector(t);o&&e.controls.addEventListener("change",()=>{o.innerHTML=`摄像机:(${e.camera.position.x.toFixed(2)},
                               ${e.camera.position.y.toFixed(2)},
                               ${e.camera.position.z.toFixed(2)}) 
                           焦点:(${e.controls.target.x.toFixed(2)},
                                ${e.controls.target.y.toFixed(2)},
                                ${e.controls.target.z.toFixed(2)}) 
                          方位角:${e.controls.getAzimuthalAngle().toFixed(2)}° 
                          俯仰角:${e.controls.getPolarAngle().toFixed(2)}°`})},T=(e,t,o="#location")=>{const n=document.querySelector(o);if(n){const r=new l;e.container.addEventListener("pointermove",s=>{r.x=s.clientX/e.container.clientWidth*2-1,r.y=-(s.clientY/e.container.clientHeight)*2+1;const a=t.getLocalInfoFromScreen(e.camera,r);a?n.innerHTML=`经度:${a.location.x.toFixed(3)}°  
                            纬度:${a.location.y.toFixed(3)}°  
                            海拔:${(a.location.z*1e3).toFixed(1)}m
                            离摄像机距离:${a.distance.toFixed(3)}km `:n.innerHTML=""})}},M=(e,t="#attribution")=>{const o=document.querySelector(t);if(o){const n=()=>o.innerHTML="© "+e.attributions.join(" | © ");e.addEventListener("source-changed",n),n()}},$=e=>{const t=new g().setPath("../image/skybox/").load(["skybox_nx.png","skybox_px.png","skybox_ny.png","skybox_py.png","skybox_nz.png","skybox_pz.png"]);e.scene.background=t},E=e=>{const t=new m(new u,new x({map:new p().load("../image/tile0.png",o=>o.colorSpace=f)}));t.name="background",t.material.polygonOffsetFactor=10,t.material.polygonOffsetUnits=1,t.material.polygonOffset=!0,t.renderOrder=-1,t.translateZ(-.1),t.applyMatrix4(e.rootTile.matrix),e.add(t)};function S(e,t){var n;const o=new c.FakeEarth(((n=e.scene.fog)==null?void 0:n.color)||new y(0));o.name="fakeearth",o.applyMatrix4(t.rootTile.matrix),e.controls.addEventListener("change",()=>{o.visible=e.controls.getDistance()>3e3}),t.add(o)}function q(e){e.addEventListener("update",()=>{const t=document.querySelector("#compass-plane");t&&(t.style.transform=`rotateX(${e.controls.getPolarAngle()}rad)`);const o=document.querySelector("#compass-text");o&&(o.style.transform=`rotate(${e.controls.getAzimuthalAngle()}rad)`)})}export{b as a,k as b,h as c,S as d,E as e,$ as f,M as g,F as h,T as s,q as u};
